{"mappings":"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","sources":["src/index.tsx","src/components/Icon.tsx","src/utils.ts","src/components/App.tsx","src/components/DeployItem.tsx","src/components/Tooltip.tsx","src/hooks/index.ts","src/hooks/useNetlifyAuth.ts","src/config.ts","src/hooks/useLocalStorage.ts"],"sourcesContent":["import React from \"react\";\nimport { createPlugin } from \"sanity\";\nimport Icon from \"./components/Icon\";\nimport App from \"./components/App\";\n\nexport interface NetlifyDeployStatusBadgeConfig {\n  siteId: string;\n  oauthClientId: string;\n}\n\nexport const netlifyDeployStatusBadgePlugin =\n  createPlugin<NetlifyDeployStatusBadgeConfig>((config) => {\n    return {\n      name: \"netlify-deploy-status-badge\",\n      tools: (prev) => {\n        return [\n          ...prev,\n          {\n            name: \"netlify-badge\",\n            title: \"‎\",\n            // eslint-disable-next-line func-name-matching\n            icon: function component() {\n              return <Icon {...config} />;\n            },\n            component: function component() {\n              return <App {...config} />;\n            },\n          },\n        ];\n      },\n    };\n  });\n","import React from \"react\";\nimport { getSiteBadge } from \"../utils\";\n\nexport default function Icon(props: any) {\n  const { siteId } = props;\n  const [icon, setIcon] = React.useState<string>(\"\");\n\n  React.useEffect(() => {\n    initializeBadge();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Refresh icon on every interval\n  // React.useEffect(() => {\n  //   const interval = setInterval(() => {\n  //     initializeBadge();\n  //   }, BADGE_REFRESH_INTERVAL);\n  //   return () => clearInterval(interval);\n  // }, []);\n\n  function initializeBadge() {\n    getSiteBadge(siteId)\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res.text();\n      })\n      .then(setIcon)\n      .catch(() => setIcon(`Netlify Site 404`));\n  }\n\n  // eslint-disable-next-line react/no-danger\n  return <div dangerouslySetInnerHTML={{ __html: icon }} />;\n}\n","import { format, isToday, isYesterday, getYear } from \"date-fns\";\nimport type { SiteId, DeployInterface, RequestOptions } from \"./types\";\n\nexport const formatDeployTime = (time: number): string => {\n  const minutes = Math.floor(time / 60);\n  const seconds = time % 60;\n\n  if (minutes === 0 && seconds === 0) {\n    return \"\";\n  }\n\n  return `Deployed in ${minutes > 0 ? `${minutes}m` : \"\"} ${\n    seconds > 0 ? `${seconds}s` : \"\"\n  }`;\n};\n\nexport const formatDeployDate = (d: Date): string => {\n  if (isToday(d)) {\n    return `Today at ${format(d, \"p\")}`;\n  }\n\n  if (isYesterday(d)) {\n    return `Yesterday at ${format(d, \"p\")}`;\n  }\n\n  const localizedDate = format(d, \"PP\").replace(`, ${getYear(d)}`, \"\");\n\n  return `${localizedDate} at ${format(d, \"p\")}`;\n};\n\nexport const getSiteBadge = (siteId: string): Promise<Response> => {\n  const time = new Date().getTime();\n\n  return fetch(\n    `https://api.netlify.com/api/v1/badges/${siteId}/deploy-status?${time}`\n  );\n};\n\nexport const getSiteDeploys = (\n  siteId: SiteId,\n  options?: RequestOptions\n): Promise<Response> =>\n  fetch(`https://api.netlify.com/api/v1/sites/${siteId}/deploys`, options);\n\nexport const getSite = (\n  siteId: SiteId,\n  options?: RequestOptions\n): Promise<Response> =>\n  fetch(`https://api.netlify.com/api/v1/sites/${siteId}`, options);\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const postSiteNewBuild = ({\n  siteId,\n  clearCache,\n  headers,\n}: {\n  siteId: SiteId;\n  clearCache: boolean;\n  headers: RequestOptions[\"headers\"];\n}) => {\n  const options = {\n    method: \"POST\",\n    headers,\n    // eslint-disable-next-line camelcase\n    body: JSON.stringify({ clear_cache: clearCache }),\n  };\n\n  return fetch(\n    `https://api.netlify.com/api/v1/sites/${siteId}/builds`,\n    options\n  );\n};\n\nexport const getDeployStatus = (\n  deploy: DeployInterface,\n  publishedDeployId = \"\"\n): string => {\n  if (publishedDeployId === deploy?.id) {\n    return \"published\";\n  }\n\n  if (\n    deploy.state === \"error\" &&\n    deploy?.error_message?.toLowerCase().includes(\"canceled build\") &&\n    deploy?.plugin_state === \"failed_build\"\n  ) {\n    return \"failed_due_to_plugin_error\";\n  }\n\n  if (\n    deploy?.state === \"error\" &&\n    deploy?.error_message\n      ?.toLowerCase()\n      .includes(\"build script returned non-zero exit code\")\n  ) {\n    return \"failed\";\n  }\n\n  if (\n    deploy?.state === \"error\" ||\n    deploy?.error_message?.toLowerCase().includes(\"canceled build\")\n  ) {\n    return \"canceled\";\n  }\n\n  return \"\";\n};\n","/* eslint-disable react/jsx-no-bind */\nimport React from \"react\";\nimport {\n  Container,\n  Heading,\n  Card,\n  Stack,\n  Flex,\n  Text,\n  Button,\n  Inline,\n  Menu,\n  MenuItem,\n  MenuButton,\n  useToast,\n  ThemeProvider,\n  studioTheme,\n} from \"@sanity/ui\";\nimport DeployItem from \"./DeployItem\";\nimport { useNetlifyAuth } from \"../hooks\";\n\nimport { getSiteDeploys, getSite, postSiteNewBuild } from \"../utils\";\nimport { useLocalStorage } from \"../hooks\";\nimport { namespace, APP_REFRESH_INTERVAL } from \"../config\";\nimport { ArrowRightIcon } from \"@sanity/icons\";\n\nconst STATE = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  READY: \"ready\",\n  ERROR: \"error\",\n  NEEDS_AUTH: \"needs_auth\",\n  AUTHENTICATING: \"authenticating\",\n  NOT_FOUND: \"site_not_found\",\n};\n\nimport { type NetlifyDeployStatusBadgeConfig } from \"../index\";\nimport { type DeployInterface, SiteInterface } from \"../types\";\n\nexport default function App(props: NetlifyDeployStatusBadgeConfig) {\n  const { siteId, oauthClientId } = props;\n  const toast = useToast();\n  const { getAuthURL, authResponse, logout } = useNetlifyAuth({\n    oauthClientId,\n  });\n\n  const [site, setSite] = useLocalStorage<SiteInterface>(\n    `${namespace}--site`,\n    null\n  );\n  const [deploys, setDeploys] = useLocalStorage(`${namespace}--deploys`, []);\n  const [isSitePrivate, setIsSitePrivate] = React.useState(false);\n  const [state, setState] = React.useState(\"idle\"); // (loading > ready | error), (loading > needs_auth > authenticating > error | ready)\n\n  const needsSetup = !oauthClientId;\n  const isLoggedIn = authResponse;\n  const needsAuth = !needsSetup && !isLoggedIn;\n  const requestOptions = React.useMemo(() => {\n    return {\n      headers: { Authorization: `Bearer ${authResponse.access_token}` },\n    };\n  }, [authResponse.access_token]);\n\n  const initOrRefreshApp = React.useCallback(() => {\n    getSite(siteId, requestOptions)\n      .then((res) => res.json())\n      .then(setSite);\n    getSiteDeploys(siteId, requestOptions)\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res;\n      })\n      .then((res) => res.json())\n      .then(setDeploys)\n      .then(() => setTimeout(() => setState(STATE.READY), 1000))\n      .catch(() => {\n        if (isSitePrivate) {\n          setState(STATE.ERROR);\n        }\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [siteId]);\n\n  // Check if we need auth, if not, good :)\n  React.useEffect(() => {\n    setState(STATE.LOADING);\n    getSiteDeploys(siteId)\n      .then((res) => {\n        if (!res.ok && res.status === 401) throw new Error(res.statusText);\n        return res;\n      })\n      .then((res) => res.json())\n      .then(setDeploys)\n      .then(() => setTimeout(() => setState(STATE.READY), 1000))\n      .then(() => {\n        getSite(siteId)\n          .then((res) => res.json())\n          .then(setSite);\n      })\n      .catch(() => {\n        setState(STATE.NEEDS_AUTH);\n        setIsSitePrivate(true);\n      });\n  }, [setDeploys, setSite, siteId]);\n\n  // We need auth here\n  React.useEffect(() => {\n    if (state === STATE.NEEDS_AUTH && isSitePrivate && siteId && isLoggedIn) {\n      initOrRefreshApp();\n    }\n  }, [isSitePrivate, siteId, isLoggedIn, state, initOrRefreshApp]);\n\n  // Refresh App on every interval\n  React.useEffect(() => {\n    // eslint-disable-next-line no-undef\n    let interval: NodeJS.Timer;\n    if (state === STATE.READY) {\n      interval = setInterval(() => {\n        toast.push({\n          title: `Refreshing site deploys...`,\n          status: \"info\",\n        });\n        initOrRefreshApp();\n      }, APP_REFRESH_INTERVAL);\n    }\n    return () => clearInterval(interval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function handleTriggerBuild(clearCache = false) {\n    postSiteNewBuild({\n      siteId: site.id,\n      clearCache,\n      headers: requestOptions.headers,\n    })\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res;\n      })\n      .then(() => {\n        toast.push({\n          title: `Successfully triggered new build ${\n            clearCache ? \"without cache\" : \"\"\n          }!`,\n          status: \"success\",\n        });\n        initOrRefreshApp();\n      })\n      .catch(() => {\n        toast.push({\n          title: `Oops, unable to trigger new build`,\n          status: \"warning\",\n        });\n      });\n  }\n\n  function handleClickAuthorize() {\n    return (window.location.href = getAuthURL());\n  }\n\n  function handleClickLogout() {\n    return logout().then(() => {\n      if (isSitePrivate) {\n        setDeploys([]);\n        window.localStorage.removeItem(`${namespace}--site`);\n        window.localStorage.removeItem(`${namespace}--deploys`);\n      }\n      setState(STATE.IDLE);\n    });\n  }\n\n  return (\n    <ThemeProvider theme={studioTheme}>\n      <Container>\n        <Card margin={2} padding={4} radius={2}>\n          <Flex justify=\"space-between\" align=\"center\">\n            <Stack space={4}>\n              <Heading size={3} as=\"h2\">\n                <Flex marginRight={5} align=\"center\">\n                  <span style={{ marginRight: 10 }}>\n                    Site Deploys (Changes)\n                  </span>\n                </Flex>\n              </Heading>\n              <Text muted>Displaying your recent site deploys.</Text>\n            </Stack>\n            <Stack space={3}>\n              {needsSetup && (\n                <>\n                  <Button\n                    as=\"a\"\n                    text=\"Click here to setup OAuth\"\n                    href=\"https://github.com/dorelljames/sanity-plugin-netlify-deploy-status-badge#configuration\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  />\n                  <Text muted size={1}>\n                    {isSitePrivate\n                      ? \"Setup Netlify's OAuth and login to view site deploys, etc.\"\n                      : \"Setup OAuth to trigger a new build.\"}\n                  </Text>\n                </>\n              )}\n              {needsAuth && (\n                <>\n                  <Button\n                    text=\"Login at Netlify\"\n                    onClick={handleClickAuthorize}\n                    tone=\"positive\"\n                  />\n                  <Text muted size={1}>\n                    {isSitePrivate\n                      ? \"Login in order to view site's deploy log and trigger a new build\"\n                      : \"Login in order to trigger a new build\"}\n                  </Text>\n                </>\n              )}\n              {isLoggedIn && (\n                <Flex>\n                  <Inline space={2}>\n                    {state === \"ready\" && (\n                      <MenuButton\n                        button={<Button text=\"Trigger Deploy\" />}\n                        id=\"menu-button-example\"\n                        menu={\n                          <Menu>\n                            <MenuItem\n                              text=\"Deploy site\"\n                              onClick={() => handleTriggerBuild()}\n                            />\n                            <MenuItem\n                              text=\"Clear cache and deploy site\"\n                              onClick={() => handleTriggerBuild(true)}\n                            />\n                          </Menu>\n                        }\n                      />\n                    )}\n                    <Button\n                      text=\"Logout\"\n                      onClick={handleClickLogout}\n                      icon={ArrowRightIcon}\n                    />\n                  </Inline>\n                </Flex>\n              )}\n            </Stack>\n          </Flex>\n        </Card>\n\n        <Card margin={4}>\n          <Stack as=\"ul\">\n            {state === \"error\" && (\n              <Card padding={4} radius={2} tone=\"critical\">\n                <Stack space={4}>\n                  <Heading>Oh nooo! Something went wrong here...</Heading>\n                  <Text>\n                    Please make sure you have access to the site configured. Try\n                    refreshing this page. If error still persists, please\n                    contact plugin author\n                    <a\n                      href=\"mailto:netlify-deploy-status-badge+galangdj@gmail.com\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      @dorelljames\n                    </a>{\" \"}\n                    or your developer.\n                  </Text>\n                </Stack>\n              </Card>\n            )}\n\n            {(state === \"loading\" ||\n              (state === \"needs_auth\" && isLoggedIn)) && (\n              <Card borderBottom as=\"li\" padding={4} radius={2}>\n                <Text as=\"em\">Getting things ready...</Text>\n              </Card>\n            )}\n\n            {deploys?.map((deploy: DeployInterface) => (\n              <DeployItem key={deploy.id} deploy={deploy} site={site} />\n            ))}\n          </Stack>\n        </Card>\n      </Container>\n    </ThemeProvider>\n  );\n}\n","/* eslint-disable camelcase */\nimport React from \"react\";\nimport { Card, Stack, Grid, Box, Flex, Text, Button, Badge } from \"@sanity/ui\";\nimport { ArrowTopRightIcon } from \"@sanity/icons\";\nimport Tooltip from \"./Tooltip\";\nimport { formatDeployTime, formatDeployDate, getDeployStatus } from \"../utils\";\nimport { SiteInterface, DeployInterface } from \"../types\";\n\ntype DeployItemProps = {\n  deploy: DeployInterface;\n  site: SiteInterface;\n};\n\nexport default function DeployItem({ deploy, site }: DeployItemProps) {\n  return (\n    <Card borderBottom as=\"li\" padding={4} radius={2} key={deploy?.id}>\n      <Grid columns={6}>\n        <Box column={4}>\n          <Stack space={3}>\n            <Flex align=\"center\">\n              <Text weight=\"semibold\">\n                <a\n                  href={deploy?.deploy_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  style={{ textTransform: `capitalize` }}\n                >\n                  {deploy.context.replace(\"-\", \" \")}\n                </a>\n              </Text>\n              <Text weight=\"semibold\">\n                {\" \"}\n                :{deploy?.branch}@\n                <a\n                  href={deploy?.commit_url || \"\"}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {deploy?.commit_ref?.substring(0, 7) || \"HEAD\"}{\" \"}\n                </a>\n              </Text>\n              {deploy.state === \"new\" && !deploy?.deploy_time && (\n                <Badge mode=\"outline\" tone=\"caution\" padding={1} marginLeft={1}>\n                  New\n                </Badge>\n              )}\n              {deploy.state === \"building\" && (\n                <Badge mode=\"outline\" tone=\"caution\" padding={1} marginLeft={1}>\n                  Building\n                </Badge>\n              )}\n              {getDeployStatus(deploy, site?.published_deploy?.id) ===\n                \"published\" && (\n                <Badge\n                  mode=\"outline\"\n                  tone=\"positive\"\n                  padding={1}\n                  marginLeft={1}\n                >\n                  Published\n                </Badge>\n              )}\n              {getDeployStatus(deploy) === \"canceled\" && (\n                <Badge mode=\"outline\" padding={1} marginLeft={1}>\n                  Canceled\n                </Badge>\n              )}\n              {getDeployStatus(deploy) === \"failed\" && (\n                <Badge\n                  mode=\"outline\"\n                  tone=\"critical\"\n                  padding={1}\n                  marginLeft={1}\n                >\n                  Failed\n                </Badge>\n              )}\n              {getDeployStatus(deploy) === \"failed_due_to_plugin_error\" && (\n                <Badge\n                  mode=\"outline\"\n                  tone=\"critical\"\n                  padding={1}\n                  marginLeft={1}\n                >\n                  Failed Due To Plugin Error\n                </Badge>\n              )}\n            </Flex>\n            <Text muted>{deploy?.title || \"No deploy message\"}</Text>\n          </Stack>\n        </Box>\n        <Flex\n          column={2}\n          justify=\"flex-end\"\n          align=\"center\"\n          style={{ textAlign: \"right\" }}\n        >\n          <Stack space={3}>\n            <Text weight=\"semibold\">\n              {formatDeployDate(new Date(deploy?.created_at))}\n            </Text>\n            {deploy?.deploy_time && (\n              <Text muted size={1}>\n                {formatDeployTime(deploy?.deploy_time)}\n              </Text>\n            )}\n          </Stack>\n          <Box marginLeft={2}>\n            <Tooltip text=\"View Deploy\">\n              <Button\n                tone=\"primary\"\n                icon={ArrowTopRightIcon}\n                mode=\"ghost\"\n                as=\"a\"\n                href={`https://app.netlify.com/sites/${deploy?.name}/deploys/${deploy?.id}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              />\n            </Tooltip>\n          </Box>\n        </Flex>\n      </Grid>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Tooltip as STooltip, Box, Text } from \"@sanity/ui\";\n\ntype TooltipProps = {\n  text: string;\n  children: React.ReactElement;\n};\n\nexport default function Tooltip({ text, children }: TooltipProps) {\n  return (\n    <STooltip\n      content={\n        <Box padding={2}>\n          <Text muted size={1}>\n            {text}\n          </Text>\n        </Box>\n      }\n      fallbackPlacements={[\"right\", \"left\"]}\n      placement=\"top\"\n    >\n      {children}\n    </STooltip>\n  );\n}\n\nTooltip.propTypes = {\n  text: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n","export { default as useNetlifyAuth } from \"./useNetlifyAuth\";\nexport { default as useLocalStorage } from \"./useLocalStorage\";\n","import React from \"react\";\nimport { namespace } from \"../config\";\n\ninterface OAuthResponse {\n  access_token: string;\n}\n\nconst initialAuthResponse = {\n  // eslint-disable-next-line camelcase\n  access_token: \"\",\n};\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport default function useNetlifyAuth({\n  oauthClientId,\n}: {\n  oauthClientId: string;\n}) {\n  const [authResponse, setAuthResponse] =\n    React.useState<OAuthResponse>(initialAuthResponse);\n\n  // Process our response from authorization\n  // React.useEffect(() => {\n  //   if (document.location.hash) {\n  //     const response = document.location.hash\n  //       .replace(/^#/, \"\")\n  //       .split(\"&\")\n  //       .reduce((result, pair) => {\n  //         const keyValue = pair.split(\"=\");\n  //         result[keyValue[0]] = keyValue[1];\n  //         return result;\n  //       }, {});\n\n  //     // Remove the token so it's not visible in the URL after we're done\n  //     document.location.hash = \"\";\n\n  //     setAuthResponse(response);\n  //     window.localStorage.setItem(\n  //       `${namespace}--auth`,\n  //       JSON.stringify(response)\n  //     );\n  //   }\n  // }, []);\n\n  // Set auth token from localStorage\n  React.useEffect(() => {\n    const authToken = window.localStorage.getItem(`${namespace}--auth`);\n    if (authToken) {\n      setAuthResponse(JSON.parse(authToken));\n    }\n  }, []);\n\n  const getAuthURL = () => {\n    return `https://app.netlify.com/authorize?client_id=${oauthClientId}&response_type=token&redirect_uri=${window.location.href}`;\n  };\n\n  const logout = () => {\n    return new Promise((resolve, reject) => {\n      window.localStorage.removeItem(`${namespace}--auth`);\n      if (!window.localStorage.getItem(`${namespace}--auth`)) {\n        setAuthResponse(initialAuthResponse);\n        resolve(\"OK\");\n      }\n\n      reject(new Error(\"Unable to logout!\"));\n    });\n  };\n\n  const getHeaders = () => {\n    const headers = authResponse\n      ? { headers: { Authorization: `Bearer ${authResponse.access_token}` } }\n      : null;\n\n    return headers;\n  };\n\n  return { authResponse, getAuthURL, getHeaders, logout };\n}\n","const namespace = \"netlify-deploy-status-badge\";\nconst APP_REFRESH_INTERVAL = 10000;\nconst BADGE_REFRESH_INTERVAL = 10000;\n\nexport { namespace, APP_REFRESH_INTERVAL, BADGE_REFRESH_INTERVAL };\n","import { useState } from \"react\";\n\n// // Usage\n// function App() {\n//   // Similar to useState but first arg is key to the value in local storage.\n//   const [name, setName] = useLocalStorage<string>(\"name\", \"Bob\");\n//   return (\n//     <div>\n//       <input\n//         type=\"text\"\n//         placeholder=\"Enter your name\"\n//         value={name}\n//         onChange={(e) => setName(e.target.value)}\n//       />\n//     </div>\n//   );\n// }\n\n// Hook\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport default function useLocalStorage<T>(\n  key: string,\n  initialValue: T | null\n) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === \"undefined\") {\n      return initialValue;\n    }\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      // eslint-disable-next-line no-console\n      console.log(error);\n      return initialValue;\n    }\n  });\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      if (typeof window !== \"undefined\") {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      }\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  };\n  return [storedValue, setValue] as const;\n}\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../"}